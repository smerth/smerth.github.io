
<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notebooks - Python the Basics - HTML</title>
    <link rel="stylesheet" href="../../../../assets/css/app.css">
    <link href='https://cdn.jsdelivr.net/devicons/1.8.0/css/devicons.min.css' rel='stylesheet'>
    <!--<link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/master/devicon.min.css">-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body class="innerpage chapter-16">

<header class="row">
    <!--<div class="small-2 columns">
                <a href="../../../../index.html">    
                    <img class="logo" src="../../../../assets/img/robo-1.png"  alt="company logo">
                </a>
            </div>-->
    <div class="small-10 columns">
        <div class="" id="name-slogan"> 
            <h1 class="name"><a href="../../../../index.html">SMERTH</a><ul class="inline-list social">
           <li><a href="#"><i class="fi-social-facebook"></i></a></li>
           <li><a href="#"><i class="fi-social-twitter"></i></a></li>
           <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
           <li><a href="#"><i class="fi-social-github"></i></a></li>
        </ul>
        </h1>
        <p class="tagline">Full-stack Web Developer</p>
            <h2 class="slogan">building with <span class="percent">100%</span> re-cycled electrons.</h2>
        </div>
        
    </div>
    <div class="small-12 columns responsive-menu">
        <div class="title-bar" data-responsive-toggle="main-menu" data-hide-for="medium">
            <button class="menu-icon" type="button" data-toggle></button>
            <div class="title-bar-title">Menu</div>
        </div>
        <div class="top-bar" id="main-menu">
            <div class="top-bar-left">
                <ul class="menu vertical medium-horizontal collapsed medium-text-center" data-responsive-menu="accordion medium-dropdown"
                    data-accordion-menu>
                    <li class="menu-text"><a href="../../../../index.html">Hello</a></li>
                    <li><a href="../../../../projects.html">Projects</a></li>
                    <li><a href="../../../../content/books/books.html">Notes</a></li>
                    <li><a href="../../../../screenshots.html">Screenshots</a></li>
                    <li><a href="../../../../about/book/chapter-1.html">About</a></li>
                    <!--<li><a href="../../../../hp-singlepage-scroll.html">fpage scroll</a></li>
                    <li><a href="../../../../hp-desk-foundation.html">desk foundation</a></li>-->
                </ul>
            </div>
            <div class="top-bar-right">
                <!--<ul class="inline-list social">
   <li><a href="#"><i class="fi-social-facebook"></i></a></li>
   <li><a href="#"><i class="fi-social-twitter"></i></a></li>
   <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
   <li><a href="#"><i class="fi-social-github"></i></a></li>
</ul>
-->
            </div>
        </div>
    </div>
</header>

<div class="row Python the Basics" data-sticky-container>
        <div id="chapter-sticky-header" class="column small-12 sticky" data-sticky data-anchor="main" data-options="marginTop:0;"
        style="width: 100%;">
        <div class="callout">
            <div class="row">
                <div class="column small-6 small-order-2 medium-order-1 medium-3 prev-container">
                                        <h6><a class="prev" href="./chapter-15.html"><i class="fi-arrow-left"></i> Previous<div><small>Chapter 15 - JSON data</small></div></a></h6>
                                    </div>                 <div class="column small-12 small-order-1 medium-order-2 medium-6 text-center title-container">
                    <div class="row">
                        <div class="small-3 medium-5 columns">
                                                        <a href="../../../../../index.html">
                                <h4 class="name">SMERTH</h4>
                            </a>
                        </div>
                        <div class="columns medium-7">
                            <h6 id="html" class="bk-title text-left">
                                <i class="fi-book-bookmark"> </i>
                                <a href="./index.html">Python the Basics</a>
                            </h6>
                            <h6 id="html" class="ch-title text-left"><small>Chapter 16 - HTML</small></h6>
                        </div>
                    </div>
                </div>                 <div class="column small-6 small-order-3 medium-order-3 medium-3 next-container">
                                        <p class="next disabled">Next &rarr;
                        <span></span>
                    </p>
                                    </div>
            </div>         </div> </div> </div>  <div id="book-page" class="Python the Basics row">
    <div class="column small-12 medium-4 large-3">
        <div id="sidebar" data-sticky-container>
                        <div class="callout" data-sticky data-anchor="main" data-options="marginTop:5.5;" style="width:100%">
                <nav id="sidebar-toc">
                    <h3><a href=".">Table of contents</a></h3>
                    <ul class="toc">
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">1.</span>
                                    <a href="./chapter-1.html"> Python</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">2.</span>
                                    <a href="./chapter-2.html"> Variables</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">3.</span>
                                    <a href="./chapter-3.html"> Functions</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">4.</span>
                                    <a href="./chapter-4.html"> Conditionals</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">5.</span>
                                    <a href="./chapter-5.html"> Loops</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">6.</span>
                                    <a href="./chapter-6.html"> Classes</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">7.</span>
                                    <a href="./chapter-7.html"> Dates</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">8.</span>
                                    <a href="./chapter-8.html"> Formatting</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">9.</span>
                                    <a href="./chapter-9.html"> Timedeltas</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">10.</span>
                                    <a href="./chapter-10.html"> Calendars</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">11.</span>
                                    <a href="./chapter-11.html"> Files</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">12.</span>
                                    <a href="./chapter-12.html"> Path utilities</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">13.</span>
                                    <a href="./chapter-13.html"> shell</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">14.</span>
                                    <a href="./chapter-14.html"> Internet Data</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">15.</span>
                                    <a href="./chapter-15.html"> JSON data</a>
                                </li>
                              
                         
                             
                                 
                                <li class="level-1 active">
                                    <a class="chapter" href="./chapter-16.html"><span class="chapter-label">Chapter 16.</span>HTML</a>
                                    <ul id="page-toc" class="unstyled toc-l2">
                                         
                                                                                        <li class="level-2" data-scroll="parsing-an-html-document">
                                                <span class="chapter-sub-label">16.1</span>
                                                <a class="internal" href="./chapter-16.html#parsing-an-html-document">Parsing an HTML document</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="open-an-html-file">
                                                <span class="chapter-sub-label">16.2</span>
                                                <a class="internal" href="./chapter-16.html#open-an-html-file">Open an HTML File</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="make-your-parser-class-a-sub-class-of-htmlparser">
                                                <span class="chapter-sub-label">16.3</span>
                                                <a class="internal" href="./chapter-16.html#make-your-parser-class-a-sub-class-of-htmlparser">Make your parser class a sub-class of HTMLparser</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="override-more-methods-of-the-base-class">
                                                <span class="chapter-sub-label">16.4</span>
                                                <a class="internal" href="./chapter-16.html#override-more-methods-of-the-base-class">Override more methods of the base class</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="count-the-metatags">
                                                <span class="chapter-sub-label">16.5</span>
                                                <a class="internal" href="./chapter-16.html#count-the-metatags">Count the metatags</a>
                                            </li>
                                                                                                                        </ul>
                                </li>
                                 
                                            </ul>                 </nav>             </div>         </div>
    </div>      <div id="main" class="main column small-12 medium-8 large-9 ">
        <div class="callout">
            <div class="main-content">
                  <h2 id="parsing-an-html-document">16.1 Parsing an HTML document</h2>

<p>Python provides a built-in way for parsing html data as well as other kinds of data. In this example we're going to see how to create our own html parser based on the html parser class that Python provides. </p>

<div class="code python">
<pre class="python">&nbsp;
metacount <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&nbsp;
<span class="co1"># create a subclass and override the handler methods</span>
<span class="kw1">class</span> MyHTMLParser<span class="br0">&#40;</span><span class="kw3">HTMLParser</span><span class="br0">&#41;</span>:
  <span class="co1"># function to handle an opening tag in the doc</span>
  <span class="co1"># this will be called when the closing &quot;&gt;&quot; of the tag is reached</span>
  <span class="kw1">def</span> handle_starttag<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> tag<span class="sy0">,</span> attrs<span class="br0">&#41;</span>:
    <span class="kw1">global</span> metacount
    <span class="kw1">print</span> <span class="st0">&quot;Encountered a start tag:&quot;</span><span class="sy0">,</span> tag
    <span class="kw1">if</span> tag <span class="sy0">==</span> <span class="st0">&quot;meta&quot;</span>:
      metacount +<span class="sy0">=</span> <span class="nu0">1</span>
&nbsp;
    pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="co1"># returns a tuple indication line and character</span>
    <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
    <span class="kw1">if</span> attrs.<span class="kw4">__len__</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:
      <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>Attributes:&quot;</span>
      <span class="kw1">for</span> a <span class="kw1">in</span> attrs:
        <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>&quot;</span><span class="sy0">,</span> a<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span><span class="st0">&quot;=&quot;</span><span class="sy0">,</span>a<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
  <span class="co1"># function to handle the ending tag</span>
  <span class="kw1">def</span> handle_endtag<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> tag<span class="br0">&#41;</span>:
    <span class="kw1">print</span> <span class="st0">&quot;Encountered an end tag:&quot;</span><span class="sy0">,</span> tag
    pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
  <span class="co1"># function to handle character and text data (tag contents)</span>
  <span class="kw1">def</span> handle_data<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> data<span class="br0">&#41;</span>:
    <span class="kw1">print</span> <span class="st0">&quot;Encountered some data:&quot;</span><span class="sy0">,</span> data
    pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
  <span class="co1"># function to handle the processing of HTML comments</span>
  <span class="kw1">def</span> handle_comment<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> data<span class="br0">&#41;</span>:
    <span class="kw1">print</span> <span class="st0">&quot;Encountered comment:&quot;</span><span class="sy0">,</span> data
    pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
&nbsp;
&nbsp;
  <span class="co1"># open the sample HTML file and read it</span>
  f <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span><span class="st0">&quot;samplehtml.html&quot;</span><span class="br0">&#41;</span>
  <span class="kw1">if</span> f.<span class="me1">mode</span> <span class="sy0">==</span> <span class="st0">&quot;r&quot;</span>:
    contents <span class="sy0">=</span> f.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="co1"># read the entire file</span>
    <span class="kw3">parser</span>.<span class="me1">feed</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span>
&nbsp;
  <span class="kw1">print</span> <span class="st0">&quot;%d meta tags encountered&quot;</span> % metacount</pre>
</div>

<div class="code python">
<pre class="python"><span class="co1"># import the HTMLParser module</span>
<span class="kw1">from</span> <span class="kw3">HTMLParser</span> <span class="kw1">import</span> <span class="kw3">HTMLParser</span>
&nbsp;
<span class="kw1">def</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>:
&nbsp;
  <span class="co1"># create a subclass and override the handler methods</span>
  <span class="kw1">class</span> MyHTMLParser<span class="br0">&#40;</span><span class="kw3">HTMLParser</span><span class="br0">&#41;</span>:
&nbsp;
  <span class="co1"># open the sample HTML file and read it</span>
  f <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span><span class="st0">&quot;samplehtml.html&quot;</span><span class="br0">&#41;</span>
  <span class="kw1">if</span> f.<span class="me1">mode</span> <span class="sy0">==</span> <span class="st0">&quot;r&quot;</span>:
    contents <span class="sy0">=</span> f.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="co1"># read the entire file</span>
    <span class="kw3">parser</span>.<span class="me1">feed</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span>
&nbsp;
  <span class="kw1">print</span> <span class="st0">&quot;%d meta tags encountered&quot;</span> % metacount
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
  main<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</div>

<p>instantiate a myHTMLParser class</p>

<div class="code python">
<pre class="python"><span class="co1"># import the HTMLParser module</span>
<span class="kw1">from</span> <span class="kw3">HTMLParser</span> <span class="kw1">import</span> <span class="kw3">HTMLParser</span>
&nbsp;
<span class="kw1">def</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>:
&nbsp;
  <span class="co1"># instantiate the parser and feed it some HTML</span>
  <span class="kw3">parser</span> <span class="sy0">=</span> MyHTMLParser<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
  main<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</div>

<h2 id="open-an-html-file">16.2 Open an HTML File</h2>

<p>We could use the urllib to open a URL but here we are working with a local file.</p>

<p>Check if the file mode is read, if so, read the file into a variable called contents, and pass the contents into the feed method of the parser function we instantiate above it.</p>

<div class="code python">
<pre class="python"><span class="co1"># import the HTMLParser module</span>
<span class="kw1">from</span> <span class="kw3">HTMLParser</span> <span class="kw1">import</span> <span class="kw3">HTMLParser</span>
&nbsp;
<span class="kw1">def</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>:
&nbsp;
    <span class="co1"># instantiate the parser and feed it some HTML</span>
    <span class="kw3">parser</span> <span class="sy0">=</span> MyHTMLParser<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># open the sample HTML file and read it</span>
    f <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span><span class="st0">&quot;samplehtml.html&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">if</span> f.<span class="me1">mode</span> <span class="sy0">==</span> <span class="st0">&quot;r&quot;</span>:
      contents <span class="sy0">=</span> f.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="co1"># read the entire file</span>
      <span class="kw3">parser</span>.<span class="me1">feed</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span> 
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
  main<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</div>

<h2 id="make-your-parser-class-a-sub-class-of-htmlparser">16.3 Make your parser class a sub-class of HTMLparser</h2>

<p>In python if you want your class to inherit (be a sub-class of) another class, you pass the parent (super-class,) into your class.</p>

<p>We define a class MyHTMLParser and make it a sub-class of HTMLParser <code>class MyHTMLParser(HTMLParser):</code></p>

<p>We add a method for parsing Comments</p>

<p>When you pass the feed contents into the feed parser <code>parser.feed(contents)</code> it will go through and call any functions you have over-ridden from the base class.  Since we have over-ridden the base class method handle_comment it will execute our code each time it encounters a comment.</p>

<p>Now we can go and override the method for any element we want to deal with...</p>

<div class="code python">
<pre class="python"><span class="co1"># import the HTMLParser module</span>
<span class="kw1">from</span> <span class="kw3">HTMLParser</span> <span class="kw1">import</span> <span class="kw3">HTMLParser</span>
&nbsp;
<span class="co1"># create a subclass and override the handler methods</span>
<span class="kw1">class</span> MyHTMLParser<span class="br0">&#40;</span><span class="kw3">HTMLParser</span><span class="br0">&#41;</span>:
&nbsp;
    <span class="co1"># function to handle the processing of HTML comments</span>
    <span class="kw1">def</span> handle_comment<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> data<span class="br0">&#41;</span>:
        <span class="kw1">print</span> <span class="st0">&quot;Encountered comment:&quot;</span><span class="sy0">,</span> data
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
&nbsp;
<span class="kw1">def</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>:
&nbsp;
    <span class="co1"># instantiate the parser and feed it some HTML</span>
    <span class="kw3">parser</span> <span class="sy0">=</span> MyHTMLParser<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># open the sample HTML file and read it</span>
    f <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span><span class="st0">&quot;samplehtml.html&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">if</span> f.<span class="me1">mode</span> <span class="sy0">==</span> <span class="st0">&quot;r&quot;</span>:
        contents <span class="sy0">=</span> f.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span>  <span class="co1"># read the entire file</span>
        <span class="kw3">parser</span>.<span class="me1">feed</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span>
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
    main<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</div>

<h2 id="override-more-methods-of-the-base-class">16.4 Override more methods of the base class</h2>

<p>Here we handle start tag, end tag and data, which is the text content of an html element.</p>

<div class="code python">
<pre class="python"><span class="co1"># import the HTMLParser module</span>
<span class="kw1">from</span> <span class="kw3">HTMLParser</span> <span class="kw1">import</span> <span class="kw3">HTMLParser</span>
&nbsp;
<span class="co1"># create a subclass and override the handler methods</span>
&nbsp;
&nbsp;
<span class="kw1">class</span> MyHTMLParser<span class="br0">&#40;</span><span class="kw3">HTMLParser</span><span class="br0">&#41;</span>:
&nbsp;
    <span class="co1"># function to handle an opening tag in the doc</span>
    <span class="co1"># this will be called when the closing &quot;&gt;&quot; of the tag is reached</span>
    <span class="kw1">def</span> handle_starttag<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> tag<span class="sy0">,</span> attrs<span class="br0">&#41;</span>:
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>  <span class="co1"># returns a tuple indication line and character</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
        <span class="kw1">if</span> attrs.<span class="kw4">__len__</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:
            <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>Attributes:&quot;</span>
            <span class="kw1">for</span> a <span class="kw1">in</span> attrs:
                <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>&quot;</span><span class="sy0">,</span> a<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot;=&quot;</span><span class="sy0">,</span> a<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
    <span class="co1"># function to handle the ending tag</span>
    <span class="kw1">def</span> handle_endtag<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> tag<span class="br0">&#41;</span>:
        <span class="kw1">print</span> <span class="st0">&quot;Encountered an end tag:&quot;</span><span class="sy0">,</span> tag
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
    <span class="co1"># function to handle character and text data (tag contents)</span>
    <span class="kw1">def</span> handle_data<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> data<span class="br0">&#41;</span>:
        <span class="kw1">print</span> <span class="st0">&quot;Encountered some data:&quot;</span><span class="sy0">,</span> data
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
    <span class="co1"># function to handle the processing of HTML comments</span>
    <span class="kw1">def</span> handle_comment<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> data<span class="br0">&#41;</span>:
        <span class="kw1">print</span> <span class="st0">&quot;Encountered comment:&quot;</span><span class="sy0">,</span> data
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
&nbsp;
<span class="kw1">def</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>:
&nbsp;
    <span class="co1"># instantiate the parser and feed it some HTML</span>
    <span class="kw3">parser</span> <span class="sy0">=</span> MyHTMLParser<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># open the sample HTML file and read it</span>
    f <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span><span class="st0">&quot;samplehtml.html&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">if</span> f.<span class="me1">mode</span> <span class="sy0">==</span> <span class="st0">&quot;r&quot;</span>:
        contents <span class="sy0">=</span> f.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span>  <span class="co1"># read the entire file</span>
        <span class="kw3">parser</span>.<span class="me1">feed</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span>
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
    main<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</div>

<p>The start tag method also takes an attributes argument <code>def handle_starttag(self, tag, attrs):</code></p>

<p>So, if there are any attributes <code>if attrs.__len__ &gt; 0:</code></p>

<p>We're going to print them out</p>

<div class="code python">
<pre class="python"><span class="kw1">if</span> attrs.<span class="kw4">__len__</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:
    <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>Attributes:&quot;</span>
    <span class="kw1">for</span> a <span class="kw1">in</span> attrs:
        <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>&quot;</span><span class="sy0">,</span> a<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot;=&quot;</span><span class="sy0">,</span> a<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span></pre>
</div>

<h2 id="count-the-metatags">16.5 Count the metatags</h2>

<p>Add a counter and set it zero <code>metacount = 0;</code></p>

<p>Add</p>

<div class="code python">
<pre class="python"><span class="kw1">def</span> handle_starttag<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> tag<span class="sy0">,</span> attrs<span class="br0">&#41;</span>:
    <span class="kw1">global</span> metacount
    <span class="kw1">print</span> <span class="st0">&quot;Encountered a start tag:&quot;</span><span class="sy0">,</span> tag
    <span class="kw1">if</span> tag <span class="sy0">==</span> <span class="st0">&quot;meta&quot;</span>:
        metacount +<span class="sy0">=</span> <span class="nu0">1</span></pre>
</div>

<p>And lastly print out the number of metatags encountered</p>

<div class="code py">
<pre class="py"> print &quot;%d meta tags encountered&quot; % metacount</pre>
</div>

<p>Resulting in:</p>

<div class="code python">
<pre class="python"><span class="co1"># import the HTMLParser module</span>
<span class="kw1">from</span> <span class="kw3">HTMLParser</span> <span class="kw1">import</span> <span class="kw3">HTMLParser</span>
&nbsp;
&nbsp;
metacount <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&nbsp;
<span class="co1"># create a subclass and override the handler methods</span>
<span class="kw1">class</span> MyHTMLParser<span class="br0">&#40;</span><span class="kw3">HTMLParser</span><span class="br0">&#41;</span>:
&nbsp;
    <span class="co1"># function to handle an opening tag in the doc</span>
    <span class="co1"># this will be called when the closing &quot;&gt;&quot; of the tag is reached</span>
    <span class="kw1">def</span> handle_starttag<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> tag<span class="sy0">,</span> attrs<span class="br0">&#41;</span>:
        <span class="kw1">global</span> metacount
        <span class="kw1">print</span> <span class="st0">&quot;Encountered a start tag:&quot;</span><span class="sy0">,</span> tag
        <span class="kw1">if</span> tag <span class="sy0">==</span> <span class="st0">&quot;meta&quot;</span>:
            metacount +<span class="sy0">=</span> <span class="nu0">1</span>
&nbsp;
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>  <span class="co1"># returns a tuple indication line and character</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
        <span class="kw1">if</span> attrs.<span class="kw4">__len__</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:
            <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>Attributes:&quot;</span>
            <span class="kw1">for</span> a <span class="kw1">in</span> attrs:
                <span class="kw1">print</span> <span class="st0">&quot;<span class="es0">\t</span>&quot;</span><span class="sy0">,</span> a<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot;=&quot;</span><span class="sy0">,</span> a<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
    <span class="co1"># function to handle the ending tag</span>
    <span class="kw1">def</span> handle_endtag<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> tag<span class="br0">&#41;</span>:
        <span class="kw1">print</span> <span class="st0">&quot;Encountered an end tag:&quot;</span><span class="sy0">,</span> tag
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
    <span class="co1"># function to handle character and text data (tag contents)</span>
    <span class="kw1">def</span> handle_data<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> data<span class="br0">&#41;</span>:
        <span class="kw1">print</span> <span class="st0">&quot;Encountered some data:&quot;</span><span class="sy0">,</span> data
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
    <span class="co1"># function to handle the processing of HTML comments</span>
    <span class="kw1">def</span> handle_comment<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> data<span class="br0">&#41;</span>:
        <span class="kw1">print</span> <span class="st0">&quot;Encountered comment:&quot;</span><span class="sy0">,</span> data
        pos <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">getpos</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">print</span> <span class="st0">&quot;At line: &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">&quot; position &quot;</span><span class="sy0">,</span> pos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
&nbsp;
&nbsp;
<span class="kw1">def</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>:
&nbsp;
    <span class="co1"># instantiate the parser and feed it some HTML</span>
    <span class="kw3">parser</span> <span class="sy0">=</span> MyHTMLParser<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># open the sample HTML file and read it</span>
    f <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span><span class="st0">&quot;samplehtml.html&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">if</span> f.<span class="me1">mode</span> <span class="sy0">==</span> <span class="st0">&quot;r&quot;</span>:
        contents <span class="sy0">=</span> f.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span>  <span class="co1"># read the entire file</span>
        <span class="kw3">parser</span>.<span class="me1">feed</span><span class="br0">&#40;</span>contents<span class="br0">&#41;</span>
&nbsp;
     <span class="kw1">print</span> <span class="st0">&quot;%d meta tags encountered&quot;</span> % metacount
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
    main<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</div>
             </div>
        </div>
    </div>     </div>  
<footer class="row">
    <div class="columns medium-12 topspace">

        <div class=" footer-top align-right text-right">
            <p class="copywrite">Copywrite © 2017</p>
        </div>

        <div class="footer-middle">
            <div class="row">
                <div class="small-12 medium-6 large-4 columns">
                    <a href="../../../../index.html">    
                        <img class="logo" src="../../../../assets/img/robo-1.png"  alt="company logo">
                    </a>
                    <div class="" id="name-slogan"> 
                        <h1 class="name"><a href="../../../../index.html">SMERTH</a><ul class="inline-list social">
                       <li><a href="#"><i class="fi-social-facebook"></i></a></li>
                       <li><a href="#"><i class="fi-social-twitter"></i></a></li>
                       <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
                       <li><a href="#"><i class="fi-social-github"></i></a></li>
                    </ul>
                    </h1>
                    <p class="tagline">Full-stack Web Developer</p>
                        <h2 class="slogan">building with <span class="percent">100%</span> re-cycled electrons.</h2>
                    </div>
                    
                    <ul class="footer-menu no-bullet inline-dot-list">
                        <li><a href="../../../../projects.html">Projects</a></li>
                        <li><a href="../../../../content/books/books.html">Notes</a></li>
                        <li><a href="../../../../screenshots.html">Screenshots</a></li>
                        <li><a href="../../../../about/book/chapter-1.html">About</a></li>
                        <!--<li><a href="../../../../hp-singlepage-scroll.html">fpage scroll</a></li>
                        <li><a href="../../../../hp-desk-foundation.html">desk foundation</a></li>-->
                    </ul>
                </div>
                <div class="small-12 medium-6 large-4 columns align-middle">
                    <ul class="contact">
                      <li><p><i class="fi-marker"></i>address</p></li>
                      <li><p><i class="fi-telephone"></i>telephone</p></li>
                      <li><p><i class="fi-mail"></i>email</p></li>
                    </ul>
                </div>
                <div class=" small-12 medium-12 large-4 columns align-middle">
                    <blockquote class="quote">
                        <p>Outside of a dog, a book is a man's best friend.</p>
                        <p>Inside of a dog it's too dark to read.</p>
                        <cite>Groucho Marx</cite>
                    </blockquote>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="row">
                <div class="large-12 columns text-center align-middle">
                    <ul class="no-bullet inline-dot-list">
                        <li><a href="../../../../index.html">London</a></li>
                        <li><a href="../../../../projects.html">Vancouver</a></li>
                        <li><a href="../../../../books.html">Tokyo</a></li>
                        <li><a href="../../../../screenshots.html">Beijing</a></li>
                        <li><a href="../../../../index.html">Hong Kong</a></li>
                        <li><a href="../../../../projects.html">Kuala Lumpur</a></li>
                        <li><a href="../../../../books.html">Singapore</a></li>
                        <li><a href="../../../../screenshots.html">Tuktoyaktuk</a></li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</footer>
<script src="../../../../assets/js/app.js"></script>

</body>

</html>