
<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notebooks - Drupal 8 and Composer - Deploy</title>
    <link rel="stylesheet" href="../../../../assets/css/app.css">
    <link href='https://cdn.jsdelivr.net/devicons/1.8.0/css/devicons.min.css' rel='stylesheet'>
    <!--<link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/master/devicon.min.css">-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body class="innerpage chapter-10">

<header class="row">
    <!--<div class="small-2 columns">
                <a href="../../../../index.html">    
                    <img class="logo" src="../../../../assets/img/robo-1.png"  alt="company logo">
                </a>            </div>-->
    <div class="small-10 columns">
        <div class="" id="name-slogan"> 
            <h1 class="name"><a href="../../../../index.html">SMERTH</a><ul class="inline-list social">
           <li><a href="#"><i class="fi-social-facebook"></i></a></li>
           <li><a href="#"><i class="fi-social-twitter"></i></a></li>
           <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
           <li><a href="#"><i class="fi-social-github"></i></a></li>
        </ul></h1>
        <p class="tagline">Full-stack Web Developer</p>
            <h2 class="slogan">building with <span class="percent">100%</span> re-cycled electrons.</h2>
        </div>
    </div>
    <div class="small-12 columns responsive-menu">
        <div class="title-bar" data-responsive-toggle="main-menu" data-hide-for="medium">
            <button class="menu-icon" type="button" data-toggle></button>
            <div class="title-bar-title">Menu</div>
        </div>
        <div class="top-bar" id="main-menu">
            <div class="top-bar-left">
                <ul class="menu vertical medium-horizontal collapsed medium-text-center" data-responsive-menu="accordion medium-dropdown"
                    data-accordion-menu>
                    <li class="menu-text"><a href="../../../../index.html">Hello</a></li>
                    <li><a href="../../../../projects.html">Projects</a></li>
                    <li><a href="../../../../content/books/books.html">Notes</a></li>
                    <li><a href="../../../../screenshots.html">Screenshots</a></li>
                    <li><a href="../../../../about/book/chapter-1.html">About</a></li>
                    <li><a href="../../../../timeline.html">Timeline</a></li>
                    <!--<li><a href="../../../../hp-singlepage-scroll.html">fpage scroll</a></li>
                    <li><a href="../../../../hp-desk-foundation.html">desk foundation</a></li>-->                </ul>
            </div>
            <div class="top-bar-right">
                <!--<ul class="inline-list social">
   <li><a href="#"><i class="fi-social-facebook"></i></a></li>
   <li><a href="#"><i class="fi-social-twitter"></i></a></li>
   <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
   <li><a href="#"><i class="fi-social-github"></i></a></li>
</ul>-->
            </div>
        </div>
    </div>
</header>
<div class="row Drupal 8 and Composer" data-sticky-container>
        <div id="chapter-sticky-header" class="column small-12 sticky" data-sticky data-anchor="main" data-options="marginTop:0;"
        style="width: 100%;">
        <div class="callout">
            <div class="row">
                <div class="column small-6 small-order-2 medium-order-1 medium-3 prev-container">
                                        <h6><a class="prev" href="./chapter-9.html"><i class="fi-arrow-left"></i> Previous<div><small>Chapter 9 - Install vs Update</small></div></a></h6>
                                    </div>                 <div class="column small-12 small-order-1 medium-order-2 medium-6 text-center title-container">
                    <div class="row">
                        <div class="small-3 medium-5 columns">
                                                        <a href="../../../../../index.html">
                                <h4 class="name">SMERTH</h4>
                            </a>
                        </div>
                        <div class="columns medium-7">
                            <h6 id="deploy" class="bk-title text-left">
                                <i class="fi-book-bookmark"> </i>
                                <a href="./index.html">Drupal 8 and Composer</a>
                            </h6>
                            <h6 id="deploy" class="ch-title text-left"><small>Chapter 10 - Deploy</small></h6>
                        </div>
                    </div>
                </div>                 <div class="column small-6 small-order-3 medium-order-3 medium-3 next-container">
                                        <h6>
                        <a class="next" href="./chapter-11.html">
                            <div class="text-right">Next <i class="fi-arrow-right"></i></div>
                            <div class="text-right"><small>Chapter 11 - Speeding Up Composer</small></div>
                        </a>
                    </h6>
                                    </div>
            </div>         </div> </div> </div>  <div id="book-page" class="Drupal 8 and Composer row">
    <div class="column small-12 medium-4 large-3">
        <div id="sidebar" data-sticky-container>
                        <div class="callout" data-sticky data-anchor="main" data-options="marginTop:5.5;" style="width:100%">
                <nav id="sidebar-toc">
                    <h3><a href=".">Table of contents</a></h3>
                    <ul class="toc">
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">1.</span>
                                    <a href="./chapter-1.html"> Overview</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">2.</span>
                                    <a href="./chapter-2.html"> Install Using Composer</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">3.</span>
                                    <a href="./chapter-3.html"> Working with the repo</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">4.</span>
                                    <a href="./chapter-4.html"> Install Modules</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">5.</span>
                                    <a href="./chapter-5.html"> Update Modules</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">6.</span>
                                    <a href="./chapter-6.html"> Use External Modules</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">7.</span>
                                    <a href="./chapter-7.html"> Apply Patches</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">8.</span>
                                    <a href="./chapter-8.html"> Automate tasks</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">9.</span>
                                    <a href="./chapter-9.html"> Install vs Update</a>
                                </li>
                              
                         
                             
                                 
                                <li class="level-1 active">
                                    <a class="chapter" href="./chapter-10.html"><span class="chapter-label">Chapter 10.</span>Deploy</a>
                                    <ul id="page-toc" class="unstyled toc-l2">
                                         
                                                                                        <li class="level-2" data-scroll="deploy-using-composer">
                                                <span class="chapter-sub-label">10.1</span>
                                                <a class="internal" href="./chapter-10.html#deploy-using-composer">Deploy Using Composer</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="using-a-service">
                                                <span class="chapter-sub-label">10.2</span>
                                                <a class="internal" href="./chapter-10.html#using-a-service">Using a service</a>
                                            </li>
                                                                                                                        </ul>
                                </li>
                                 
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">11.</span>
                                    <a href="./chapter-11.html"> Speeding Up Composer</a>
                                </li>
                              
                                            </ul>                 </nav>             </div>         </div>
    </div>      <div id="main" class="main column small-12 medium-8 large-9 ">
        <div class="callout">
            <div class="main-content">
                  <h2 id="deploy-using-composer">10.1 Deploy Using Composer</h2>

<p>When you want to deploy.  On your server run:</p>

<div class="code bash">
<pre class="bash">composer <span class="kw2">install</span> \
<span class="re5">--no-progress</span> \
<span class="re5">--prefer-dist</span> \
<span class="re5">--no-dev</span> \
<span class="re5">--optimize-autoloader</span> \</pre>
</div>

<p><code>install</code>: Downloads the same versions of all the dependacies defined in the composer.lock file.</p>

<p><code>--no-progress</code>: don't output progress as the bash script runs</p>

<p><code>--prefer-dist</code>: Download distribution packages, use local cache</p>

<p><code>--no-dev</code>: Avoids downlodaing development libraries (You don't need devel module on your production site...)</p>

<p><code>--optimize-autoloader</code>: Generate class map for PRS-0/4 autoloaders</p>

<h2 id="using-a-service">10.2 Using a service</h2>

<p>Example: Using <a href="https://deployer.org">Deployer</a> a deployment tool for PHP projects</p>

<p>Reqire it in your project</p>

<div class="code bash">
<pre class="bash">composer require deployer<span class="sy0">/</span>deployer</pre>
</div>

<p>Creae a <code>deploy.php</code> file in your repo</p>

<div class="code php">
<pre class="php"><span class="kw2">namespace</span> Deployer<span class="sy0">;</span>
&nbsp;
<span class="kw1">require</span> <span class="st_h">'recipe/drupal8.php'</span><span class="sy0">;</span>
&nbsp;
set<span class="br0">&#40;</span><span class="st_h">'repository'</span><span class="sy0">,</span> <span class="st_h">'https://github.com/YOUR-REPO-HERE'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
server<span class="br0">&#40;</span><span class="st_h">'drupal8day'</span><span class="sy0">,</span> <span class="st_h">'drupal8day.dev'</span><span class="br0">&#41;</span>
      <span class="sy0">-&gt;</span><span class="me1">user</span><span class="br0">&#40;</span><span class="st_h">'drupal'</span><span class="br0">&#41;</span>
    <span class="sy0">-&gt;</span><span class="me1">forwardAgent</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="sy0">-&gt;</span><span class="me1">set</span><span class="br0">&#40;</span><span class="st_h">'deploy_path'</span><span class="sy0">,</span> <span class="st_h">'var/www/html/drupal'</span><span class="br0">&#41;</span>
    <span class="sy0">-&gt;</span><span class="me1">stage</span><span class="br0">&#40;</span><span class="st_h">'develop'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
after<span class="br0">&#40;</span><span class="st_h">'deploy'</span><span class="sy0">,</span> <span class="st_h">'deploy:vendors'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>This file defines everything necessary for the tool to build the site starting with requiring the recipe we began the tutorial with and adding all dependancies, etc. to the github repo.</p>

<p>This is where the script calls Drupal Console:</p>

<div class="code php">
<pre class="php">after<span class="br0">&#40;</span><span class="st_h">'deploy'</span><span class="sy0">,</span> <span class="st_h">'deploy:vendors'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</div>

<p>The <code>deploy:vendors</code> call runs <code>composer install</code> on the server with all the appropriate flags...</p>

<p>To  run this <code>deploy.php</code> file:</p>

<div class="code bash">
<pre class="bash">deployer deploy deveop</pre>
</div>
             </div>
        </div>
    </div>     </div>  
<footer class="row">
    <div class="columns medium-12 topspace">

        <div class=" footer-top align-right text-right">
            <p class="copywrite">Copywrite © 2017</p>
        </div>

        <div class="footer-middle">
            <div class="row">
                <div class="small-12 medium-6 large-4 columns">
                    <a href="../../../../index.html">    
                        <img class="logo" src="../../../../assets/img/robo-1.png"  alt="company logo">
                    </a>                    <div class="" id="name-slogan"> 
                        <h1 class="name"><a href="../../../../index.html">SMERTH</a><ul class="inline-list social">
                       <li><a href="#"><i class="fi-social-facebook"></i></a></li>
                       <li><a href="#"><i class="fi-social-twitter"></i></a></li>
                       <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
                       <li><a href="#"><i class="fi-social-github"></i></a></li>
                    </ul></h1>
                    <p class="tagline">Full-stack Web Developer</p>
                        <h2 class="slogan">building with <span class="percent">100%</span> re-cycled electrons.</h2>
                    </div>
                    <ul class="footer-menu no-bullet inline-dot-list">
                        <li><a href="../../../../projects.html">Projects</a></li>
                        <li><a href="../../../../content/books/books.html">Notes</a></li>
                        <li><a href="../../../../screenshots.html">Screenshots</a></li>
                        <li><a href="../../../../about/book/chapter-1.html">About</a></li>
                        <li><a href="../../../../timeline.html">Timeline</a></li>
                        <!--<li><a href="../../../../hp-singlepage-scroll.html">fpage scroll</a></li>
                        <li><a href="../../../../hp-desk-foundation.html">desk foundation</a></li>-->                    </ul>
                </div>
                <div class="small-12 medium-6 large-4 columns align-middle">
                    <ul class="contact">
                      <li><p><i class="fi-marker"></i>address</p></li>
                      <li><p><i class="fi-telephone"></i>telephone</p></li>
                      <li><p><i class="fi-mail"></i>email</p></li>
                    </ul>                </div>
                <div class=" small-12 medium-12 large-4 columns align-middle">
                    <blockquote class="quote">
                        <p>Outside of a dog, a book is a man's best friend.</p>
                        <p>Inside of a dog it's too dark to read.</p>
                        <cite>Groucho Marx</cite>
                    </blockquote>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="row">
                <div class="large-12 columns text-center align-middle">
                    <ul class="no-bullet inline-dot-list">
                        <li><a href="../../../../index.html">London</a></li>
                        <li><a href="../../../../projects.html">Vancouver</a></li>
                        <li><a href="../../../../books.html">Tokyo</a></li>
                        <li><a href="../../../../screenshots.html">Beijing</a></li>
                        <li><a href="../../../../index.html">Hong Kong</a></li>
                        <li><a href="../../../../projects.html">Kuala Lumpur</a></li>
                        <li><a href="../../../../books.html">Singapore</a></li>
                        <li><a href="../../../../screenshots.html">Tuktoyaktuk</a></li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</footer><script src="../../../../assets/js/app.js"></script>

</body>

</html>