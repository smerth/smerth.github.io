
<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notebooks - Drupal 8 and Composer - Install Using Composer</title>
    <link rel="stylesheet" href="../../../../assets/css/app.css">
    <link href='https://cdn.jsdelivr.net/devicons/1.8.0/css/devicons.min.css' rel='stylesheet'>
    <!--<link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/master/devicon.min.css">-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body class="innerpage chapter-2">

<header class="row">
    <!--<div class="small-2 columns">
                <a href="../../../../index.html">    
                    <img class="logo" src="../../../../assets/img/robo-1.png"  alt="company logo">
                </a>
            </div>-->
    <div class="small-10 columns">
        <div class="" id="name-slogan"> 
            <h1 class="name"><a href="../../../../index.html">SMERTH</a><ul class="inline-list social">
           <li><a href="#"><i class="fi-social-facebook"></i></a></li>
           <li><a href="#"><i class="fi-social-twitter"></i></a></li>
           <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
           <li><a href="#"><i class="fi-social-github"></i></a></li>
        </ul>
        </h1>
        <p class="tagline">Full-stack Web Developer</p>
            <h2 class="slogan">building with <span class="percent">100%</span> re-cycled electrons.</h2>
        </div>
        
    </div>
    <div class="small-12 columns responsive-menu">
        <div class="title-bar" data-responsive-toggle="main-menu" data-hide-for="medium">
            <button class="menu-icon" type="button" data-toggle></button>
            <div class="title-bar-title">Menu</div>
        </div>
        <div class="top-bar" id="main-menu">
            <div class="top-bar-left">
                <ul class="menu vertical medium-horizontal collapsed medium-text-center" data-responsive-menu="accordion medium-dropdown"
                    data-accordion-menu>
                    <li class="menu-text"><a href="../../../../index.html">Hello</a></li>
                    <li><a href="../../../../projects.html">Projects</a></li>
                    <li><a href="../../../../content/books/books.html">Notes</a></li>
                    <li><a href="../../../../screenshots.html">Screenshots</a></li>
                    <li><a href="../../../../about/book/chapter-1.html">About</a></li>
                    <!--<li><a href="../../../../hp-singlepage-scroll.html">fpage scroll</a></li>
                    <li><a href="../../../../hp-desk-foundation.html">desk foundation</a></li>-->
                </ul>
            </div>
            <div class="top-bar-right">
                <!--<ul class="inline-list social">
   <li><a href="#"><i class="fi-social-facebook"></i></a></li>
   <li><a href="#"><i class="fi-social-twitter"></i></a></li>
   <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
   <li><a href="#"><i class="fi-social-github"></i></a></li>
</ul>
-->
            </div>
        </div>
    </div>
</header>

<div class="row Drupal 8 and Composer" data-sticky-container>
        <div id="chapter-sticky-header" class="column small-12 sticky" data-sticky data-anchor="main" data-options="marginTop:0;"
        style="width: 100%;">
        <div class="callout">
            <div class="row">
                <div class="column small-6 small-order-2 medium-order-1 medium-3 prev-container">
                                        <h6><a class="prev" href="./chapter-1.html"><i class="fi-arrow-left"></i> Previous<div><small>Chapter 1 - Overview</small></div></a></h6>
                                    </div>                 <div class="column small-12 small-order-1 medium-order-2 medium-6 text-center title-container">
                    <div class="row">
                        <div class="small-3 medium-5 columns">
                                                        <a href="../../../../../index.html">
                                <h4 class="name">SMERTH</h4>
                            </a>
                        </div>
                        <div class="columns medium-7">
                            <h6 id="install-using-composer" class="bk-title text-left">
                                <i class="fi-book-bookmark"> </i>
                                <a href="./index.html">Drupal 8 and Composer</a>
                            </h6>
                            <h6 id="install-using-composer" class="ch-title text-left"><small>Chapter 2 - Install Using Composer</small></h6>
                        </div>
                    </div>
                </div>                 <div class="column small-6 small-order-3 medium-order-3 medium-3 next-container">
                                        <h6>
                        <a class="next" href="./chapter-3.html">
                            <div class="text-right">Next <i class="fi-arrow-right"></i></div>
                            <div class="text-right"><small>Chapter 3 - Working with the repo</small></div>
                        </a>
                    </h6>
                                    </div>
            </div>         </div> </div> </div>  <div id="book-page" class="Drupal 8 and Composer row">
    <div class="column small-12 medium-4 large-3">
        <div id="sidebar" data-sticky-container>
                        <div class="callout" data-sticky data-anchor="main" data-options="marginTop:5.5;" style="width:100%">
                <nav id="sidebar-toc">
                    <h3><a href=".">Table of contents</a></h3>
                    <ul class="toc">
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">1.</span>
                                    <a href="./chapter-1.html"> Overview</a>
                                </li>
                              
                         
                             
                                 
                                <li class="level-1 active">
                                    <a class="chapter" href="./chapter-2.html"><span class="chapter-label">Chapter 2.</span>Install Using Composer</a>
                                    <ul id="page-toc" class="unstyled toc-l2">
                                         
                                                                                        <li class="level-2" data-scroll="reference">
                                                <span class="chapter-sub-label">2.1</span>
                                                <a class="internal" href="./chapter-2.html#reference">Reference</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="drupal-template">
                                                <span class="chapter-sub-label">2.2</span>
                                                <a class="internal" href="./chapter-2.html#drupal-template">Drupal template</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="file-structure">
                                                <span class="chapter-sub-label">2.3</span>
                                                <a class="internal" href="./chapter-2.html#file-structure">File Structure</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="committing-to-git">
                                                <span class="chapter-sub-label">2.4</span>
                                                <a class="internal" href="./chapter-2.html#committing-to-git">Committing to Git</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="use-drupal-console-to-install-the-site">
                                                <span class="chapter-sub-label">2.5</span>
                                                <a class="internal" href="./chapter-2.html#use-drupal-console-to-install-the-site">Use Drupal Console to install the site</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="serve-the-site-with-drupal-console">
                                                <span class="chapter-sub-label">2.6</span>
                                                <a class="internal" href="./chapter-2.html#serve-the-site-with-drupal-console">Serve the site with Drupal Console</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="secure-sync-files">
                                                <span class="chapter-sub-label">2.7</span>
                                                <a class="internal" href="./chapter-2.html#secure-sync-files">Secure sync files</a>
                                            </li>
                                                                                        <li class="level-2" data-scroll="git-commit">
                                                <span class="chapter-sub-label">2.8</span>
                                                <a class="internal" href="./chapter-2.html#git-commit">Git commit</a>
                                            </li>
                                                                                                                        </ul>
                                </li>
                                 
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">3.</span>
                                    <a href="./chapter-3.html"> Working with the repo</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">4.</span>
                                    <a href="./chapter-4.html"> Install Modules</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">5.</span>
                                    <a href="./chapter-5.html"> Update Modules</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">6.</span>
                                    <a href="./chapter-6.html"> Use External Modules</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">7.</span>
                                    <a href="./chapter-7.html"> Apply Patches</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">8.</span>
                                    <a href="./chapter-8.html"> Automate tasks</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">9.</span>
                                    <a href="./chapter-9.html"> Install vs Update</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">10.</span>
                                    <a href="./chapter-10.html"> Deploy</a>
                                </li>
                              
                         
                             
                                                                <li class="level-1">
                                    <span class="chapter-label">11.</span>
                                    <a href="./chapter-11.html"> Speeding Up Composer</a>
                                </li>
                              
                                            </ul>                 </nav>             </div>         </div>
    </div>      <div id="main" class="main column small-12 medium-8 large-9 ">
        <div class="callout">
            <div class="main-content">
                  <h2 id="reference">2.1 Reference</h2>

<p>Notes from: <a href="https://www.youtube.com/watch?v=7NvmN3ITC7E&amp;list=PLtaXuX0nEZk8NY8L4weAUJljPRG5vzT_g&amp;index=11">Drupal 8 Day: Improve Your Drupal 8 Development Workflow Using Composer</a></p>

<h2 id="drupal-template">2.2 Drupal template</h2>

<p>Use the Drupal Composer template file <a href="https://github.com/drupal-composer/drupal-project">Drupal Template</a></p>

<div class="code bash">
<pre class="bash">composer create-project drupal-composer<span class="sy0">/</span>drupal-project:<span class="nu0">8</span>.x-dev some-dir <span class="re5">--stability</span> dev <span class="re5">--no-interaction</span></pre>
</div>

<p>Although this command specifies <code>8.x-dev</code> the <code>composer.json</code> file that generates the projects requires:</p>

<div class="code json">
<pre class="json">        &quot;drupal/core&quot;: &quot;~8.0&quot;,
        &quot;drush/drush&quot;: &quot;~8.0&quot;,
        &quot;drupal/console&quot;: &quot;~1.0&quot;</pre>
</div>

<p>So the lastest stable version is installed…  That's odd… But let's carry on...</p>

<h2 id="file-structure">2.3 File Structure</h2>

<p>You will find that vendor folder and web folder are separate.  Serve the web folder...</p>

<h2 id="committing-to-git">2.4 Committing to Git</h2>

<p><strong>Always commit your <code>composer.lock</code> file.</strong></p>

<p>Create you git repo of the new project:</p>

<div class="code bash">
<pre class="bash"><span class="kw2">git init</span></pre>
</div>

<p>You will see the project contains a <code>.gitignore</code> file</p>

<p>You will see the vendor folder is excluded so we don't commit 3rd party libraries.  Its a light-weight repo like it should be!!</p>

<h2 id="use-drupal-console-to-install-the-site">2.5 Use Drupal Console to install the site</h2>

<p><strong>N.B.</strong> - No spaces, underscores, hyphen, or funny characters in the <code>--db-name</code></p>

<div class="code bash">
<pre class="bash">drupal site:install standard <span class="re5">--langcode</span>=<span class="st0">&quot;en&quot;</span> \
<span class="re5">--db-type</span>=<span class="st0">&quot;mysql&quot;</span> <span class="re5">--db-host</span>=<span class="st0">&quot;127.0.0.1&quot;</span> \
<span class="re5">--db-name</span>=<span class="st0">&quot;databasename&quot;</span> <span class="re5">--db-user</span>=<span class="st0">&quot;root&quot;</span> \
<span class="re5">--db-pass</span>=<span class="st0">&quot;root-user-password&quot;</span> <span class="re5">--db-port</span>=<span class="st0">&quot;3306&quot;</span> \
<span class="re5">--site-name</span>=<span class="st0">&quot;Site Name&quot;</span> \
<span class="re5">--site-mail</span>=<span class="st0">&quot;site@mail.com&quot;</span> \
<span class="re5">--account-name</span>=<span class="st0">&quot;admin&quot;</span> \
<span class="re5">--account-mail</span>=<span class="st0">&quot;admin@mail.com&quot;</span> \
<span class="re5">--account-pass</span>=<span class="st0">&quot;admin&quot;</span> \
<span class="re5">--no-interaction</span></pre>
</div>

<h2 id="serve-the-site-with-drupal-console">2.6 Serve the site with Drupal Console</h2>

<div class="code bash">
<pre class="bash">drupal server</pre>
</div>

<p>No more setting up vhosts…  This serves the site on port: 8088</p>

<p>Open up the site in an IDE with an integrated terminal and you can code and work with composer, drush and drupal console in one fluid process…</p>

<h2 id="secure-sync-files">2.7 Secure sync files</h2>

<p>Since we have this structure why not move the config/sync files outside the web directory. Maybe to <code>../config/sync</code></p>

<p>Once you move the files, tell D8 where to find them.  There is no need for the hash in the path anymore since the files are outside the web root.</p>

<p>@ web/sites/default/settings.php</p>

<p>Change this</p>

<div class="code php">
<pre class="php"><span class="re0">$config_directories</span><span class="br0">&#91;</span><span class="st_h">'sync'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'sites/default/files/config_hjcQQyuNCfTiBHxPvw1vwT-GzZf3GqmBNv47CrlWtcl9CThwSxbscwABi6SQ39yeFKMpAc9hVA/sync'</span><span class="sy0">;</span></pre>
</div>

<p>To this:</p>

<div class="code php">
<pre class="php"><span class="re0">$config_directories</span><span class="br0">&#91;</span><span class="st_h">'sync'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'../config/sync'</span><span class="sy0">;</span></pre>
</div>

<h2 id="git-commit">2.8 Git commit</h2>

<p>Commit everything.</p>
             </div>
        </div>
    </div>     </div>  
<footer class="row">
    <div class="columns medium-12 topspace">

        <div class=" footer-top align-right text-right">
            <p class="copywrite">Copywrite © 2017</p>
        </div>

        <div class="footer-middle">
            <div class="row">
                <div class="small-12 medium-6 large-4 columns">
                    <a href="../../../../index.html">    
                        <img class="logo" src="../../../../assets/img/robo-1.png"  alt="company logo">
                    </a>
                    <div class="" id="name-slogan"> 
                        <h1 class="name"><a href="../../../../index.html">SMERTH</a><ul class="inline-list social">
                       <li><a href="#"><i class="fi-social-facebook"></i></a></li>
                       <li><a href="#"><i class="fi-social-twitter"></i></a></li>
                       <li><a href="#"><i class="fi-social-linkedin"></i></a></li>
                       <li><a href="#"><i class="fi-social-github"></i></a></li>
                    </ul>
                    </h1>
                    <p class="tagline">Full-stack Web Developer</p>
                        <h2 class="slogan">building with <span class="percent">100%</span> re-cycled electrons.</h2>
                    </div>
                    
                    <ul class="footer-menu no-bullet inline-dot-list">
                        <li><a href="../../../../projects.html">Projects</a></li>
                        <li><a href="../../../../content/books/books.html">Notes</a></li>
                        <li><a href="../../../../screenshots.html">Screenshots</a></li>
                        <li><a href="../../../../about/book/chapter-1.html">About</a></li>
                        <!--<li><a href="../../../../hp-singlepage-scroll.html">fpage scroll</a></li>
                        <li><a href="../../../../hp-desk-foundation.html">desk foundation</a></li>-->
                    </ul>
                </div>
                <div class="small-12 medium-6 large-4 columns align-middle">
                    <ul class="contact">
                      <li><p><i class="fi-marker"></i>address</p></li>
                      <li><p><i class="fi-telephone"></i>telephone</p></li>
                      <li><p><i class="fi-mail"></i>email</p></li>
                    </ul>
                </div>
                <div class=" small-12 medium-12 large-4 columns align-middle">
                    <blockquote class="quote">
                        <p>Outside of a dog, a book is a man's best friend.</p>
                        <p>Inside of a dog it's too dark to read.</p>
                        <cite>Groucho Marx</cite>
                    </blockquote>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="row">
                <div class="large-12 columns text-center align-middle">
                    <ul class="no-bullet inline-dot-list">
                        <li><a href="../../../../index.html">London</a></li>
                        <li><a href="../../../../projects.html">Vancouver</a></li>
                        <li><a href="../../../../books.html">Tokyo</a></li>
                        <li><a href="../../../../screenshots.html">Beijing</a></li>
                        <li><a href="../../../../index.html">Hong Kong</a></li>
                        <li><a href="../../../../projects.html">Kuala Lumpur</a></li>
                        <li><a href="../../../../books.html">Singapore</a></li>
                        <li><a href="../../../../screenshots.html">Tuktoyaktuk</a></li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</footer>
<script src="../../../../assets/js/app.js"></script>

</body>

</html>